<!-- client/src/app/features/client-area/components/payments/client-area-payments.component.html -->
<header *ngIf="showHeader()">
  <h1>Meus Pagamentos</h1>
</header>

<div class="container">
  <!-- Loading -->
  <div *ngIf="isLoading()" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Carregando pagamentos...</p>
  </div>

  <!-- Conteúdo principal -->
  <div *ngIf="!isLoading()">
    <!-- Resumo do mês ativo -->
   <div class="month-summary" *ngIf="showMonthTabs()">
  <h3>Total Pago em {{ activeMonthLabel() }}: 
    <strong>{{ formatCurrency(getActiveMonthTotal()) }}</strong>
  </h3>
</div>

    <!-- Abas por mês -->
    <div *ngIf="showMonthTabs()" class="tabs-header">
      <button 
        *ngFor="let month of paymentMonths()" 
        class="tab-button"
        [class.active]="activeMonthKey() === month.monthKey"
        (click)="setActiveMonth(month.monthKey)">
        {{ month.monthLabel }}
      </button>
    </div>

    <!-- Tabela de pagamentos do mês ativo -->
    <div *ngIf="getActiveMonthPayments().length > 0" class="table-container">
      <table class="payments-table">
        <thead>
          <tr>
            <th>Data</th>
            <th>Descrição</th>
            <th>Forma</th>
            <th>Status</th>
            <th>Valor</th>
            
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let payment of getActiveMonthPayments()">
            <td>{{ formatDate(payment.paymentDate) }}</td>
            <td>{{ payment.description }}</td>
            <td>{{ payment.paymentMethod }}</td>
            <td>
              <span class="status" [class]="getStatusClass(payment.status)">
                {{ payment.status }}
              </span>
            </td>
            <td>{{ formatCurrency(payment.amountPaid) }}</td>
          
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Estado vazio -->
    <div *ngIf="getActiveMonthPayments().length === 0" class="empty-state">
      <p>Nenhum pagamento encontrado para este mês.</p>
    </div>
  </div>

  <!-- View All Link -->
  <div *ngIf="showViewAllLink() && !isLoading()" class="view-all-link">
    <a routerLink="/client-area/payments">Ver todos os pagamentos</a>
  </div>
</div>