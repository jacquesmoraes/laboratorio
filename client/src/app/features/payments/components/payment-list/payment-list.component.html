<div class="container">
  <div class="flex justify-between items-center mb-6">
    <h1 class="title">Pagamentos</h1>
    <button (click)="navigateToCreate()" class="btn btn-primary">
      Novo Pagamento
    </button>
  </div>

  <!-- Filtros -->
  <div class="filters-container">
    <div class="filters-grid">
      <div class="filter-item">
        <label class="filter-label">Buscar</label>
        <input 
          type="text"
          [(ngModel)]="filters().search"
          (ngModelChange)="setSearchFilter($event)"
          placeholder="Cliente ou descrição do pagamento"
          class="filter-input">
      </div>
      <div class="filter-item">
        <label class="filter-label">Data Início</label>
        <input 
          type="date"
          [(ngModel)]="filters().startDate"
          (change)="onFilterChange()"
          class="filter-input">
      </div>
      <div class="filter-item">
        <label class="filter-label">Data Fim</label>
        <input 
          type="date"
          [(ngModel)]="filters().endDate"
          (change)="onFilterChange()"
          class="filter-input">
      </div>
      <div class="filter-item">
        <button (click)="clearFilters()" class="btn btn-secondary w-full">
          Limpar Filtros
        </button>
      </div>
    </div>
  </div>

  <!-- Lista de Pagamentos -->
  <div class="table-container">
    <div class="overflow-x-auto">
      <table class="table">
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Data</th>
            <th>Valor</th>
            <th>Descrição</th>
            <th>Fatura</th>
          </tr>
        </thead>
        <tbody>
          @for (payment of payments(); track payment.id) {
            <tr (click)="viewPayment(payment.id)" class="payment-row">
              <td class="client-name">{{ payment.clientName }}</td>
              <td class="payment-date">{{ formatDate(payment.paymentDate) }}</td>
              <td class="payment-amount">R$ {{ formatCurrency(payment.amountPaid) }}</td>
              <td class="payment-description">{{ payment.description || '-' }}</td>
              <td class="invoice-number">{{ payment.invoiceNumber || '-' }}</td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Paginação -->
    @if (paginationInfo()) {
      <div class="pagination-container">
        <div class="pagination-info">
          Mostrando 
          <span class="font-medium">{{ paginationInfo()!.start }}</span>
          a 
          <span class="font-medium">{{ paginationInfo()!.end }}</span>
          de 
          <span class="font-medium">{{ paginationInfo()!.total }}</span>
          resultados
        </div>
        <nav class="pagination-nav">
          <button 
          (click)="changePage(-1)"
          [disabled]="(pagination()?.pageNumber ?? 0) <= 1"
          class="pagination-button pagination-prev">
          Anterior
        </button>
        <button 
          (click)="changePage(1)"
          [disabled]="(pagination()?.pageNumber ?? 0) >= (pagination()?.totalPages ?? 0)"
          class="pagination-button pagination-next">
          Próxima
        </button>
        </nav>
      </div>
    }

  </div>
</div>
