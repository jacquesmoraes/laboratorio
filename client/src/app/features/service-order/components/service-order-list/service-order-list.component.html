<div class="container">
  <div class="flex justify-between items-center mb-6">
    <h1 class="title">
      <mat-icon class="title-icon">assignment</mat-icon>
      Ordens de Servi√ßo
    </h1>

    <div class="button-group">
      <button class="btn btn-primary" (click)="navigateToNew()">
        <mat-icon>add</mat-icon>
        Nova Ordem
      </button>
      <button class="btn btn-secondary" [disabled]="!hasSelection()" (click)="finishSelectedOrders()">
        <mat-icon>receipt</mat-icon>
        Finalizar OS
      </button>
    </div>
  </div>

  <div class="table-container">
    <app-service-order-filters
      [initialSearch]="currentParams().search || ''"
      [initialStatus]="currentParams().status || ''"
      [initialSortBy]="currentParams().sort || 'DateIn'"
      [initialShowFinishedOrders]="!currentParams().excludeFinished"
      (filterChange)="onFilterChange($event)">
    </app-service-order-filters>

    <app-service-order-table
      [serviceOrders]="serviceOrders()"
      [selectedOrderIds]="selectedOrderIds()"
      [totalItems]="totalItems()"
      [pageSize]="pageSize()"
      [pageIndex]="pageIndex()"
      [pageSizeOptions]="pageSizeOptions"
      [loading]="loading()"
      (selectionChange)="onSelectionChange($event)"
      (pageChange)="onPageChange($event)"
      (action)="onAction($event)">
    </app-service-order-table>
  </div>
</div>
